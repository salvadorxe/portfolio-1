---
import { getCollection, type CollectionEntry } from "astro:content";
import Main from "../../components/Main.astro";
import Splash from "../../components/Splash.astro";
import Layout from "../../layouts/Layout.astro";

export const getStaticPaths = async () => {
  const projects = await getCollection("projects");
  const paths = projects.map((project) => {
    return {
      params: {
        slug: project.slug,
      },
      props: {
        project,
      },
    };
  });
  return paths;
};

type Props = {
  project: CollectionEntry<"projects">;
};

const { project } = Astro.props;
const { Content } = await project.render();
---

<Layout title="Home">
  <Main>
    <section
      class="h-[calc(100vh-var(--header-height))] flex flex-col justify-end pb-12 overflow-hidden"
    >
      <!-- title and pitch hstack-->
      <div class="flex flex-wrap items-center justify-between gap-y-2">
        <h1 class="text-4xl text-black leading-tight mb-4">
          {project.data.title}
        </h1>
        <span class="ml-auto text-gray-600"> {project.data.pitch} </span>
      </div>
      <!-- project details format-->
      <div class="flex flex-col gap-y-2">
        <span>
          <span class="text-gray-800">Timeline </span>
          <span class="text-gray-600 font-medium">{project.data.timeline}</span>
        </span>
        <span>
          <span class="text-gray-600 items-center flex flex-wrap gap-2">
            <span class="text-gray-800">Roles </span>
            {
              project.data.roles.map((role) => (
                <span class="bg-gray-100 px-2 py-1 rounded-md">{role}</span>
              ))
            }
          </span>
        </span>
        <span>
          <span class="text-gray-600 items-center flex flex-wrap gap-2">
            <span class="text-gray-800">Tools </span>
            {
              project.data.tools.map((tool) => (
                <span class="bg-gray-100 px-2 py-1 rounded-md">{tool}</span>
              ))
            }
          </span>
        </span>
      </div>
      <div class="w-full h-px bg-black bg-opacity-25 mt-8"></div>
      <!-- project image-->
    </section>
  </Main>
</Layout>
